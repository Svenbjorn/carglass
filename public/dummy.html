<html>

<head></head>

<body>
    <div id="controlAddIn"></div>
    <script>
        let value = {
            netsEndpoint: "connectcloud-test.aws.nets.eu", // example: https://connectcloud-test.aws.nets.eu
            // paymentSite: "https://pay.vita.fo/terminal",
            // trustedOrigin: "https://pay.vita.fo",
            paymentSite: "http://localhost:3000",
            trustedOrigin: "http://localhost:3000",
            login: {
                user: "test_nordia",
                psw: "5up3r-cloud!"
            },
            terminalId: "74212001",
            amount:"2020",
            type:"48", //transaction 48,refund 49,reversal 50, admin admin
            orderID:"123",
        }
        function startPayment(value) {
            // return new Promise(function (resolve) {
                var frame = document.createElement("iframe");
                frame.src = value.paymentSite;
                frame.height = "300px";
                frame.width = "400px";
                frame.onload = function () {
                    frame.contentWindow.postMessage(value, value.trustedOrigin);
                }
                var controlAddIn = document.querySelector("#controlAddIn")
                controlAddIn.appendChild(frame);
                window.onmessage = function (e) {

                    console.log(e);
                    if (e.data.success || e.data.cancel) {
                        // controlAddIn.innerHTML = "";

                    }
                };
            // });
        }
        startPayment(value).then(async (res) => {
            console.log(res);
        })
    </script>
</body>

</html>